<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }

        .currentTime {
            background: teal;
            color: white
        }

        td {
            border-bottom: 1px solid silver;
            padding: 5px;
        }

        .time {
            white-space: nowrap;
            text-align: center;
        }

        html {
            scroll-behavior: smooth;
        }

        .header {
            position: sticky;
            top: 0;
        }

        .footer {
            position: sticky;
            bottom: 0;
            width: 100%;
            background-color: silver;
            color: "#808080";
        }
    </style>
    <title>24/7 Akanda Nama Schedule - Brahma Sabha</title>
    <script>
        const zeroPad = (num, places) => String(num).padStart(places, '0')
        let volunteers = [
            "Kannan - Philadelphia USA",
            "Murthi - Philadelphia USA",
            "Radhika - Philadelphia USA",
            "Mythili - Philadelphia USA",
            "Raj - Philadelphia USA ",
            "Naren Washington D.C. USA",
            "SubadhraNarendar - VA, USA",
            "Gurumurthi, CA, USA",
            "",
            "Preethi Jaisankar, Austin TX",
            "",
            "Kalavathy Chennai ",
            "Chitra Suryanarayanan Chennai",
            "Latha Ramani",
            "Revathi Sundaresan, Portland,OR,USA",
            "Srividhya Krishna and family, Portland OR",
            "",
            "Malathi Arun, California",
            "Lakshmi Srikanth Wisconsin",
            "Appanna, Mylapore",
            "Vasudevan",
            "Priya Kumar ",
            "harini",
            "Radha Mohan ",
            "Bhama mami, Bangalore",
            "Aarthi Swaminathan, CA",
            "Bhama mami, Bangalore",
            "Bhama mami, Bangalore",
            "Rukmani",
            "Revathi Dharmambhal,BLR",
            "",
            "Ramya Ramani",
            "Santha",
            "Sekar",
            "seethalakshmi",
            "krthiga",
            "Sumathi Rajagopalan UK",
            "Sowmiya ",
            "Sowmiya ",
            "",
            "",
            "Priya Ramanan",
            "",
            "",
            "Radha Sridharan mami, Srirangam",
            "Radha Sridharan mami, Srirangam",
            "Krithika Nandalal, Qatar",
            "Krithika Nandalal, Qatar",
            "Srinath & Family Mumbai",
            "Srinath & Family Mumbai",
            "Srinath & Family Mumbai",
            "Radhakrishnan, AUS / Yamuna",
            "Radhakrishnan, AUS",
            "Periyanayagi,Chennai",
            "Periyanayagi,Chennai",
            "Thailambal Chennai",
            "jayshree venkatesan",
            "jayshree venkateaan",
            "jayshree venkateaan",
            "jayshree venkatesan",
            "Kalyani mami",
            "jayshree venkatesan",
            "Devi ravikumar",
            "jayshree venkatesan",
            "devi ravikumar",
            "Rohit ",
            "Renuga Devi, GA",
            "",
            "",
            "Chella",
            "Radhika",
            "",
            "Banu Kumar v",
            "viji",
            "",
            "Appanna, Mylapore",
            "Abirami",
            "sathya singapore ",
            "Brahmasabha Chicago SaroRaju ",
            "Radhika Prakash",
            "Ramas Singapore ",
            "Subha Mahadevan Singapore",
            "venkatesh",
            "Kamakshi, Delhi ",
            "mrs rao ",
            "Raji Viswanathan CA",
            "Rohini Suresh,EST",
            "Padmanaban",
            "Sankari",
            "Narayanan ",
            "Balambigai",
            "NANDALAL ",
            "S. Jeyalakshmi, Chennai",
            "Uma Sundaram",
            "Brahmasabha Chicago Rajesh Family",
            "Prabha S",
            "Ravindran  & family ",
            "Santharamani Pallassana, Asburn, VA",
            "Santha",
            "Sekar",
            "seethalakshmi",
            "krthiga",
            "geethasethuraman ",
            "Rajashree ",
            "Srividhya Ganesan, Milwaukee",
            "janaki yogesh",
            "",
            "RoopaSharath Chicago",
            "shobha shankar, Vasantha mami",
            "shobha shankar, Vasantha mami",
            "shobha shankar, Vasantha mami",
            "Padma mami",
            "",
            "Thaila Akka, DC",
            "Kamakshi, DC",
            "Kamakshi, DC",
            "Kamakshi, DC",
            "Mythili mami MD",
            "Geetha",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "pavithra ",
            "Shuba Kumar",
            "janaki yogesh ",
            "Shanthi NJ",
            "Renuga Devi, GA",
            "Krupa NJ",
            "Meenu NJ",
            "Ashmitha",
            "venkatesh",
            "Lakshmi",
        ];

        function onLoad() {
            var scheduleTable = document.getElementById("schedule")

            //document.getElementById("footer").innerText = Intl.DateTimeFormat().resolvedOptions().timeZone

            // dt is in localTimeZone
            let dt = new Date()

            document.getElementById("footer").innerText = dt.toString().split(" ").slice(5).join(" ")
            //UTC
            var hour = 0
            var mins = 30

            localMins = mins + dt.getTimezoneOffset() * -1;
            if (localMins < 0) {
                localMins += 1440;
            }
            hour = Math.floor(localMins / 60);
            mins = (localMins % 60);
            var iStart = 0;
            for (i = 0; i < volunteers.length; ++i) {
                if (hour == 6 && mins == 0) {
                    break
                }
                mins += 10
                if (mins == 60) {
                    hour += 1
                    mins = 0
                    if (hour == 24) {
                        hour = 0
                    }
                }
                iStart += 1
            }

            for (i = 0; i < volunteers.length; ++i) {
                // Create an empty <tr> element and add it to the 1st position of the table:
                var row = scheduleTable.insertRow(-1);

                // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);

                var displayHH = hour
                var am_pm = " am"
                if (displayHH > 11) {
                    displayHH -= 12
                    am_pm = " pm"
                }
                if (displayHH == 0) {
                    displayHH = 12
                }

                // Add some text to the new cells:
                cell1.innerText = zeroPad(displayHH, 2) + ":" + zeroPad(mins, 2) + am_pm;
                cell1.classList.add("time")
                cell2.innerHTML = volunteers[iStart];
                row.id = zeroPad(hour, 2) + ":" + zeroPad(mins, 2)

                mins += 10
                if (mins == 60) {
                    hour += 1
                    mins = 0
                    if (hour == 24) {
                        hour = 0
                    }
                }
                iStart += 1
                if (iStart == volunteers.length) {
                    iStart = 0
                }
            }

            indicateCurrentTime()
        }

        function indicateCurrentTime() {
            var tealList = document.getElementsByClassName("currentTime")
            for (i = 0; i < tealList.length; ++i) {
                tealList[i].classList.remove("currentTime")
            }

            // dt is in localTimeZone
            let dt = new Date()
            let hour = dt.getHours()
            let mins = Math.floor(dt.getMinutes() / 10) * 10
            let currentTimeRow = document.getElementById(zeroPad(hour, 2) + ":" + zeroPad(mins, 2))
            if (currentTimeRow != null) {
                currentTimeRow.classList.add("currentTime");
                if (currentTimeRow.rowIndex > 4) {
                    currentTimeRow.parentNode.rows[currentTimeRow.rowIndex - 5].scrollIntoView(true);
                }
            }

            timeOutMM = (9 - (dt.getMinutes() % 10)) * 60 //convertedToSeconds
            timeOutSS = (60 - dt.getSeconds())
            setTimeout(indicateCurrentTime, (timeOutMM + timeOutSS) * 1000)
        }
    </script>
</head>

<body onload="onLoad()">
    <div class="w3-container w3-teal header">
        <h3>24/7 Akanda Nama Schedule - Brahma Sabha</h3>
    </div>
    <div id="mainScreen">
        <table>
            <tbody id="schedule">

            </tbody>
        </table>

        <div id="footer" class="w3-container footer">

        </div>
    </div>
</body>

</html>